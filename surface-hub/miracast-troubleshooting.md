---
title: Surface Hub 上的 Miracast 疑难解答
description: 了解如何解决 Surface Hub 上的 Miracast 问题。
ms.prod: surface-hub
ms.sitesec: library
author: dansimp
ms.author: dansimp
ms.topic: article
ms.date: 06/20/2019
ms.reviewer: ''
manager: laurawi
ms.localizationpriority: medium
ms.openlocfilehash: 96c7c42fe0176f275a8657165d88bf447e57772b
ms.sourcegitcommit: 109d1d7608ac4667564fa5369e8722e569b8ea36
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/27/2020
ms.locfileid: "10832190"
---
# <span data-ttu-id="39529-103">Surface Hub 上的 Miracast 疑难解答</span><span class="sxs-lookup"><span data-stu-id="39529-103">Troubleshoot Miracast on Surface Hub</span></span>

<span data-ttu-id="39529-104">Surface Hub 通过 Miracast 协议支持无线投影。</span><span class="sxs-lookup"><span data-stu-id="39529-104">Surface Hub supports wireless projection through the Miracast protocol.</span></span> <span data-ttu-id="39529-105">目前可用的大多数无线监视器和适配器都使用 Miracast 的原始实现方式。</span><span class="sxs-lookup"><span data-stu-id="39529-105">Most wireless monitors and adapters available today use the original implementation of Miracast.</span></span> <span data-ttu-id="39529-106">Surface Hub 使用稍微不同的 Miracast 版本，此版本称为 **Miracast 自治组所有者 (AGO)**。</span><span class="sxs-lookup"><span data-stu-id="39529-106">Surface Hub uses a slightly different version of Miracast known as **Miracast Autonomous Group Owner (AGO)**.</span></span> <span data-ttu-id="39529-107">无线投影到 Surface Hub 失败时常见故障排除步骤是测试投影到另一个无线监视器或适配器。</span><span class="sxs-lookup"><span data-stu-id="39529-107">A common troubleshooting step when projecting wirelessly to Surface Hub fails is to test projecting to another wireless monitor or adapter.</span></span> <span data-ttu-id="39529-108">然而，在大多数情况下，这些设备不使用 Miracast AGO，并且不使用 Surface Hub 的处理方式来处理无线投影。</span><span class="sxs-lookup"><span data-stu-id="39529-108">However, in most cases, these devices are not using Miracast AGO and do not handle wireless projection the same way that Surface Hub does.</span></span>

<span data-ttu-id="39529-109">在传统的 Miracast 中，投影设备将连接由支持 Miracast 的监视器设置的接入点，然后此监视器将使用投影设备的网络通道将流量发送回投影设备。</span><span class="sxs-lookup"><span data-stu-id="39529-109">In traditional Miracast, the projecting device will connect the access point set up by the Miracast-enabled monitor, and then the monitor will send traffic back to the projecting device using the network channel of the projecting device.</span></span> <span data-ttu-id="39529-110">Miracast AGO 是一个两步连接过程：</span><span class="sxs-lookup"><span data-stu-id="39529-110">Miracast AGO is a two-step connection process:</span></span>

- <span data-ttu-id="39529-111">第一步是使用 2.4GHz 的带宽进行初始连接。</span><span class="sxs-lookup"><span data-stu-id="39529-111">The first step is an initial connection using 2.4GHz.</span></span> 
- <span data-ttu-id="39529-112">在初次握手之后，投影设备使用监视器上的无线通道设置将流量发送到监视器。</span><span class="sxs-lookup"><span data-stu-id="39529-112">After that initial handshake, the projecting device sends traffic to the monitor using the wireless channel settings on the monitor.</span></span> <span data-ttu-id="39529-113">如果 Surface Hub 连接到 WLAN 网络（接入点），则它将使用已连接网络所使用的相同通道，否则将使用“设置”中的 Miracast 通道。</span><span class="sxs-lookup"><span data-stu-id="39529-113">If Surface Hub is connected to a Wi-Fi network, the access point, it will use the same channel as the connected network, otherwise it will use the Miracast channel from Settings.</span></span>

<span data-ttu-id="39529-114">Surface Hub 的 Miracast 通常存在以下两种类型的问题：[连接](#connect-issues)和[性能](#performance-issues)。</span><span class="sxs-lookup"><span data-stu-id="39529-114">There are generally two types of issues with Miracast to Surface Hub: [connection](#connect-issues) and [performance](#performance-issues).</span></span> <span data-ttu-id="39529-115">在任何一种情况下，最好在 Surface Hub 的位置获取无线网络活动的一般图片。</span><span class="sxs-lookup"><span data-stu-id="39529-115">In either case, it is a good idea to get a general picture of wireless network activity in the Surface Hub's location.</span></span> <span data-ttu-id="39529-116">如果运行网络扫描工具，则将向你显示环境中可用的网络和通道使用情况。</span><span class="sxs-lookup"><span data-stu-id="39529-116">Running a network scanning tool will show you the available networks and channel usage in the environment.</span></span>

## <a name="connect-issues"></a><span data-ttu-id="39529-117">连接问题</span><span class="sxs-lookup"><span data-stu-id="39529-117">Connect issues</span></span>

<span data-ttu-id="39529-118">确保在 Surface Hub 上的“设置”中启用了 WLAN 和 Miracast。</span><span class="sxs-lookup"><span data-stu-id="39529-118">Ensure both Wi-Fi and Miracast are both enabled in Settings on Surface Hub.</span></span> 

<span data-ttu-id="39529-119">如果你运行了网络扫描，则应该会看到列为接入点的 Surface Hub Miracast。</span><span class="sxs-lookup"><span data-stu-id="39529-119">If you ran a network scan, you should see Surface Hub Miracast listed as an access point.</span></span> <span data-ttu-id="39529-120">如果在扫描中显示 Surface Hub 的 Miracast 网络，但不能将其视为可用设备，则可以尝试调整 Surface Hub 使用的 Miracast 通道。</span><span class="sxs-lookup"><span data-stu-id="39529-120">If Surface Hub's Miracast network shows up on the scan, but you cannot not see it as an available device, you can try to adjust the Miracast channel used by Surface Hub.</span></span> 

<span data-ttu-id="39529-121">当 Surface Hub 连接到 WLAN 网络时，它将对其 Miracast 接入点使用 WLAN 接入点所使用的相同通道设置。</span><span class="sxs-lookup"><span data-stu-id="39529-121">When Surface Hub is connected to a Wi-Fi network it will use the same channel settings as the Wi-Fi access point for its Miracast access point.</span></span> <span data-ttu-id="39529-122">为了进行故障排除，请从任何 WLAN 网络中断开 Surface Hub（但保持启用 WLAN），以便你可以控制用于 Miracast 的通道。</span><span class="sxs-lookup"><span data-stu-id="39529-122">For troubleshooting purposes, disconnect Surface Hub from any Wi-Fi networks (but keep Wi-Fi enabled), so you can control the channel used for Miracast.</span></span> <span data-ttu-id="39529-123">你可以在“设置”中手动选择 Miracast 通道。</span><span class="sxs-lookup"><span data-stu-id="39529-123">You can manually select the Miracast channel in Settings.</span></span> <span data-ttu-id="39529-124">每次更改后，你将需要重启 Surface Hub。</span><span class="sxs-lookup"><span data-stu-id="39529-124">You will need to restart Surface Hub after each change.</span></span> <span data-ttu-id="39529-125">一般来说，你将希望使用网络扫描中所显示的利用率不高的通道。</span><span class="sxs-lookup"><span data-stu-id="39529-125">Generally speaking, you will want to use channels that do not show heavy utilization from the network scan.</span></span>

<span data-ttu-id="39529-126">连接问题也可能是连接设备问题所造成的。</span><span class="sxs-lookup"><span data-stu-id="39529-126">It is also possible that the connect issue can be the result of a problem on the connecting device.</span></span> <span data-ttu-id="39529-127">如果投影设备要运行 Windows，则应该运行 Windows 8.1 或更高版本以获得全面的 Miracast 支持。</span><span class="sxs-lookup"><span data-stu-id="39529-127">If the projecting device is running Windows, it should be Windows 8.1 or newer for full Miracast support.</span></span> <span data-ttu-id="39529-128">同样，为了进行排除故障，请从任何 WLAN 网络中断开投影设备。</span><span class="sxs-lookup"><span data-stu-id="39529-128">Again, for troubleshooting, disconnect the projecting device from any Wi-Fi networks.</span></span> <span data-ttu-id="39529-129">这将消除接入点通道与 Surface Hub 上设置的 Miracast 通道之间的任何通道切换。</span><span class="sxs-lookup"><span data-stu-id="39529-129">This will eliminate any channel switching between the access point channel and the Miracast channel set on Surface Hub.</span></span> <span data-ttu-id="39529-130">此外，某些组策略和防火墙设置可能与 WLAN 网络相关联。</span><span class="sxs-lookup"><span data-stu-id="39529-130">Also, some Group Policy and firewall settings may be tied to a Wi-Fi network.</span></span>

### <a name="check-drivers"></a><span data-ttu-id="39529-131">检查驱动程序</span><span class="sxs-lookup"><span data-stu-id="39529-131">Check drivers</span></span>

<span data-ttu-id="39529-132">确保在投影设备上安装最新的驱动程序和更新也是一个好主意。</span><span class="sxs-lookup"><span data-stu-id="39529-132">It is also a good idea to ensure the latest drivers and updates are installed on the projecting device.</span></span> <span data-ttu-id="39529-133">在设备管理器中，打开 WLAN 适配器和视频适配器，并检查是否有更新的驱动程序版本。</span><span class="sxs-lookup"><span data-stu-id="39529-133">In Device Manager, open the Wi-Fi adapter and video adapter and check for an updated driver version.</span></span> <span data-ttu-id="39529-134">如果 Surface Pro 3 和 Surface Pro 4 使用的是较旧的 WLAN 驱动程序，则强烈建议对它们使用[修补程序 3120232](https://support.microsoft.com/help/3120232/poor-wireless-performance-on-5-ghz-connections-on-surface-pro-3-and-surface-3)。</span><span class="sxs-lookup"><span data-stu-id="39529-134">[Hotfix 3120232](https://support.microsoft.com/help/3120232/poor-wireless-performance-on-5-ghz-connections-on-surface-pro-3-and-surface-3) is highly recommended for Surface Pro 3 and Surface Pro 4 if they are on an older Wi-Fi driver.</span></span> 

### <a name="check-for-miracast-support"></a><span data-ttu-id="39529-135">检查 Miracast 支持</span><span class="sxs-lookup"><span data-stu-id="39529-135">Check for Miracast support</span></span>

<span data-ttu-id="39529-136">接下来，确保设备支持 Miracast。</span><span class="sxs-lookup"><span data-stu-id="39529-136">Next, ensure Miracast is supported on the device.</span></span> 

1. <span data-ttu-id="39529-137">按 Windows 键 + R 并键入 `dxdiag`。</span><span class="sxs-lookup"><span data-stu-id="39529-137">Press Windows Key + R and type `dxdiag`.</span></span> 
2. <span data-ttu-id="39529-138">单击 "保存所有信息"。</span><span class="sxs-lookup"><span data-stu-id="39529-138">Click "Save all information".</span></span> 
3. <span data-ttu-id="39529-139">打开保存的 dxdiag.txt 并查找 **Miracast**。</span><span class="sxs-lookup"><span data-stu-id="39529-139">Open the saved dxdiag.txt and find **Miracast**.</span></span> <span data-ttu-id="39529-140">它应该显示 **Available, with HDCP**。</span><span class="sxs-lookup"><span data-stu-id="39529-140">It should say **Available, with HDCP**.</span></span> 
    
### <a name="check-firewall"></a><span data-ttu-id="39529-141">检查防火墙</span><span class="sxs-lookup"><span data-stu-id="39529-141">Check firewall</span></span>
    
<span data-ttu-id="39529-142">Windows 防火墙可能会阻止 Miracast 流量。</span><span class="sxs-lookup"><span data-stu-id="39529-142">The Windows firewall can block Miracast traffic.</span></span> <span data-ttu-id="39529-143">最简单的测试是禁用防火墙并测试投影。</span><span class="sxs-lookup"><span data-stu-id="39529-143">The simplest test is to disable the firewall and test projection.</span></span> <span data-ttu-id="39529-144">如果禁用防火墙后 Miracast 正常工作，则为以下项添加例外</span><span class="sxs-lookup"><span data-stu-id="39529-144">If Miracast works with the firewall disabled, add an exception for</span></span>

    C:\Windows\System32\WUDFHost.exe
    Allow In/Out connections for TCP and UDP, Ports: All.

### <a name="check-group-policy-settings"></a><span data-ttu-id="39529-145">检查组策略设置</span><span class="sxs-lookup"><span data-stu-id="39529-145">Check Group Policy settings</span></span>

<span data-ttu-id="39529-146">在加入域的设备上，组策略也可能会阻止 Miracast。</span><span class="sxs-lookup"><span data-stu-id="39529-146">On domain-joined devices, Group Policy can also block Miracast.</span></span> 

1. <span data-ttu-id="39529-147">使用 Windows 键 + R 并键入 `rsop.msc` 来执行**策略的结果集**管理单元。</span><span class="sxs-lookup"><span data-stu-id="39529-147">Use the Windows Key + R and type `rsop.msc` to execute the **Resultant Set of Policy** snap-in.</span></span> <span data-ttu-id="39529-148">这将显示应用于电脑的当前策略。</span><span class="sxs-lookup"><span data-stu-id="39529-148">This will show the current policies applied to the PC.</span></span> 
2. <span data-ttu-id="39529-149">查看**计算机配置** > **Windows 设置** > **安全设置** > **无线网络(IEEE 802.11)策略**。</span><span class="sxs-lookup"><span data-stu-id="39529-149">Review **Computer Configuration** > **Windows Settings** > **Security Settings** > **Wireless Network (IEEE 802.11) Policies**.</span></span> <span data-ttu-id="39529-150">那里应该有无线策略的设置。</span><span class="sxs-lookup"><span data-stu-id="39529-150">There should be a setting for wireless policies.</span></span> 
3. <span data-ttu-id="39529-151">双击无线策略的设置，随即将出现一个对话框。</span><span class="sxs-lookup"><span data-stu-id="39529-151">Double click the setting for wireless policies and a dialog box will appear.</span></span> 
4. <span data-ttu-id="39529-152">打开**网络权限**选项卡，并选择**允许所有人创建所有用户配置文件**。</span><span class="sxs-lookup"><span data-stu-id="39529-152">Open the **Network Permissions** tab and select **Allow everyone to create all user profiles**.</span></span>

### <a name="check-event-logs"></a><span data-ttu-id="39529-153">检查事件日志</span><span class="sxs-lookup"><span data-stu-id="39529-153">Check event logs</span></span>

<span data-ttu-id="39529-154">最后一项检查是检查事件日志。</span><span class="sxs-lookup"><span data-stu-id="39529-154">The last place to check is in the Event logs.</span></span> <span data-ttu-id="39529-155">Miracast 事件将记录到 **Wlanautoconfig** 中。</span><span class="sxs-lookup"><span data-stu-id="39529-155">Miracast events will be logged to **Wlanautoconfig**.</span></span> <span data-ttu-id="39529-156">这适用于 Surface Hub 和投影设备。</span><span class="sxs-lookup"><span data-stu-id="39529-156">This is true on both Surface Hub and the projecting device.</span></span> <span data-ttu-id="39529-157">如果您导出 Surface Hub 日志，则可以在**WindowsEventLog**文件夹中查看 surface Hub 的 Wlanautoconfig。</span><span class="sxs-lookup"><span data-stu-id="39529-157">If you export Surface Hub logs, you can view Surface Hub's Wlanautoconfig in the **WindowsEventLog** folder.</span></span> <span data-ttu-id="39529-158">事件日志中的错误可以提供关于连接失败位置的一些附加详细信息。</span><span class="sxs-lookup"><span data-stu-id="39529-158">Errors in the event log can provide some additional details on where the connection fails.</span></span>

## <a name="performance-issues"></a><span data-ttu-id="39529-159">性能问题</span><span class="sxs-lookup"><span data-stu-id="39529-159">Performance issues</span></span>

<span data-ttu-id="39529-160">连接无线投影后，可能会遇到导致延迟的性能问题。</span><span class="sxs-lookup"><span data-stu-id="39529-160">After wireless projection is connected, it is possible to see performance issues causing latency.</span></span> <span data-ttu-id="39529-161">这通常是整体通道饱和或导致通道切换的情况所造成的。</span><span class="sxs-lookup"><span data-stu-id="39529-161">This is generally a result of overall channel saturation or a situation that causes channel switching.</span></span> 

<span data-ttu-id="39529-162">对于通道饱和，请参阅网络扫描，并尝试使用流量较少的通道。</span><span class="sxs-lookup"><span data-stu-id="39529-162">For channel saturation, refer to the network scan and try to use channels with less traffic.</span></span>

<span data-ttu-id="39529-163">当 WLAN 适配器需要向多个通道发送流量时，会导致通道切换。</span><span class="sxs-lookup"><span data-stu-id="39529-163">Channel switching is caused when the Wi-Fi adapter needs to send traffic to multiple channels.</span></span> <span data-ttu-id="39529-164">某些通道支持动态频率选择 (DFS)。</span><span class="sxs-lookup"><span data-stu-id="39529-164">Certain channels support Dynamic Frequency Selection (DFS).</span></span> <span data-ttu-id="39529-165">DFS 用于通道 49 至 148。</span><span class="sxs-lookup"><span data-stu-id="39529-165">DFS is used on channels 49 through 148.</span></span> <span data-ttu-id="39529-166">连接到 DFS 通道后，某些 WLAN 驱动程序将表现出性能不佳。</span><span class="sxs-lookup"><span data-stu-id="39529-166">Some Wi-Fi drivers will show poor performance when connected to a DFS channel.</span></span> <span data-ttu-id="39529-167">如果在连接到 DFS 通道后发现 Miracast 性能不佳，请尝试利用非 DFS 通道进行投影。</span><span class="sxs-lookup"><span data-stu-id="39529-167">If you are seeing poor Miracast performance while connected to a DFS channel, try the projection on a non-DFS channel.</span></span> <span data-ttu-id="39529-168">Surface Hub 和投影设备都应该使用非 DFS 通道。</span><span class="sxs-lookup"><span data-stu-id="39529-168">Both Surface Hub and projecting device should use non-DFS channels.</span></span>

<span data-ttu-id="39529-169">如果 Surface Hub 和投影设备都已连接到 WLAN，但将不同接入点与不同通道配合使用，那么这将在连接 Miracast 时强制 Surface Hub 和投影设备进行通道切换。</span><span class="sxs-lookup"><span data-stu-id="39529-169">If Surface Hub and the projecting device are both connected to Wi-Fi but using different access points with different channels, this will force Surface Hub and the projecting device to channel switch while Miracast is connected.</span></span> <span data-ttu-id="39529-170">这将导致无线投影性能差，并且 WLAN 网络性能差。</span><span class="sxs-lookup"><span data-stu-id="39529-170">This will result in both poor wireless project and poor network performance over Wi-Fi.</span></span> <span data-ttu-id="39529-171">通道切换将影响所有无线流量的性能，而不仅仅是无线投影。</span><span class="sxs-lookup"><span data-stu-id="39529-171">The channel switching will affect the performance of all wireless traffic, not just wireless projection.</span></span> 

<span data-ttu-id="39529-172">如果投影设备连接到 WLAN 网络时使用的通道不同于 Surface Hub 对 Miracast 所使用的通道，则也将发生通道切换。</span><span class="sxs-lookup"><span data-stu-id="39529-172">Channel switching will also occur if the projecting device is connected to an Wi-Fi network using a different channel than the channel that Surface Hub uses for Miracast.</span></span> <span data-ttu-id="39529-173">因此，最佳做法是将 Surface Hub 的 Miracast 通道设置为与最常使用的访问点相同的信道。</span><span class="sxs-lookup"><span data-stu-id="39529-173">So, a best practice is to set Surface Hub's Miracast channel to the same channel as the most commonly used access point.</span></span> 

<span data-ttu-id="39529-174">如果环境中存在多个 WLAN 网络或接入点，则无法避免某些通道切换。</span><span class="sxs-lookup"><span data-stu-id="39529-174">If there are multiple Wi-Fi networks or access points in the environment, some channel switching is unavoidable.</span></span> <span data-ttu-id="39529-175">通过确保所有 WLAN 驱动程序是最新版本，可以最好地解决此问题。</span><span class="sxs-lookup"><span data-stu-id="39529-175">This is best addressed by ensuring all Wi-Fi drivers are up to date.</span></span>

## <a name="contact-support"></a><span data-ttu-id="39529-176">联系支持人员</span><span class="sxs-lookup"><span data-stu-id="39529-176">Contact Support</span></span>

<span data-ttu-id="39529-177">如果有疑问或需要帮助，您可以[创建支持请求](https://support.microsoft.com/supportforbusiness/productselection)。</span><span class="sxs-lookup"><span data-stu-id="39529-177">If you have questions or need help, you can [create a support request](https://support.microsoft.com/supportforbusiness/productselection).</span></span>
